# jt808_server

## 介绍

jt808服务器

## 使用说明

#### jt808报文解析

原始报文: `7E020000280130222555550001000000000000000306AD7130016257B80005020800342503191452490104000002082504000000005D7E`

![](./img/image.png)

在上述报文中7E是标识为，各个位数解析如下：

```shell
7E|0200|0028|013022255555|0001|00000000|00000003|06AD7130|016257B8|0005|0208|0034|250319145249|01|04|00000208|25|04|00000000|5D|7E
```

| 报文片                                                                              | 16进制位数 | 字节数 | 含义    | 备注            |
| -------------------------------------------------------------------------------- |:------ | --- | ----- | ------------- |
| 7E                                                                               | 2      | 1   | 标识位   | 头部            |
| 0200                                                                             | 4      | 2   | 消息ID  |               |
| 0028                                                                             | 4      | 2   | 消息体长度 |               |
| 013022255555                                                                     | 12     | 6   | 终端手机号 | 原始报文          |
| 0001                                                                             | 4      | 2   | 消息流水号 |               |
| 000000000000000306AD7130016257B8000502080034250319145249010400000208250400000000 | 80     | 40  | 消息体   | 不同消息体封装的内容不一样 |
| 5D                                                                               | 2      | 1   | 校验码   |               |
| 7E                                                                               | 2      | 1   | 标识位   | 尾部            |

```shell
协议数据：7E020000280130222555550001000000000000000306AD7130016257B80005020800342503191452490104000002082504000000005D7E
[0200]消息 ID：512
[0028]协议部分数据长度：40
[013022255555]终端手机号
[0001]消息流水号：1
    位置信息汇报
    位置基本信息=000000000000000306AD7130016257B8000502080034250319145249
        [00000000]808报警位：0
        [00000003]状态位：3
            bit0  1： ACC 开
            bit1  1：定位
            bit2  0：北纬
            bit3  0：东经
            bit4  0：运营状态
            bit5  0：经纬度未经保密插件加密
            bit8-9 00：空车
            bit10  0：车辆油路正常
            bit11  0：车辆电路正常
            bit12  0：车门解锁
            bit13  0：门 1 关
            bit14  0：门 2 关
            bit15  0：门 3 关
            bit16  0：门 4 关
            bit17  0：门 5 关
            bit18  0：未使用 GPS 卫星进行定位
            bit19  0：未使用北斗卫星进行定位
            bit20  0：未使用 GLONASS 卫星进行定位
            bit21  0：未使用 Galileo 卫星进行定位
            bit22  0：车辆处于停止状态
        [06AD7130]纬度：112.030000°
        [016257B8]经度：23.222200°
        [0005]高程(米)：5
        [0208]速度(1/10km/h)：520
        [0034]方向：52
        [250319145249]时间：2025-03-19 14:52:49
    位置附加信息项列表
        [01]附加信息 ID [04]附加信息长度
            [00000208]里程(1/10km)：520
        [25]附加信息 ID [04]附加信息长度
            0x25=扩展车辆信号状态位
            [00000000]状态位：0
[5D]校验码正确
```

#### 校验码验证

+ 与运算（&）

运算的两个数据，按二进制位进行“与”运算，运算规则：`0&0=0;   0&1=0;    1&0=0;     1&1=1`;

> 两位同时为“1”，结果才为“1”，否则为0

```shell
00000011 & 00000101 = 0000 0001

运算过程
---------------------------------
00000011
    &
00000101
   ||
00000001
```

+ 或运算（|）

运算的两个数据，按二进制位进行“或”运算。

`运算规则：0|0=0；   0|1=1；   1|0=1；    1|1=1；`

> 两个位只要有一个为1，其值为1。

```shell
00000011 | 00000101 = 0000 0111


运过程算
---------------------------------
00000011
    &
00000101
    ||
00000111
```

+ 异或运算（^）

算的两个数据，按二进制位进行“异或”运算。

`运算规则：0^0=0；   0^1=1；   1^0=1；   1^1=0；`

> 两个位置值不同，则该位结果为1，否则为0。

```shell
00001001 ^ 00000101=00001100 

运过程算
------------------------------
00001001
   &
00000101
   ||
00001100
```

校验码指从消息头开始，同后一字节异或，直到校验码前一个字节，占用一个字节。

两个16进制位占用一个字节，按字节分组，每组转为二进制，进行异或运算。

```shell
7E020000280130222555550001000000000000000306AD7130016257B80005020800342503191452490104000002082504000000005D7E
```

上述报文转为二进制组为

```shell
[00000010 00000000 00000000 00101000 00000001 00110000 00100010 00100101 01010101 01010101 00000000 00000001 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000011 00000110 10101101 01110001 00110000 00000001 01100010 01010111 10111000 00000000 00000101 00000010 00001000 00000000 00110100 00100101 00000011 00011001 00010100 01010010 01001001 00000001 00000100 00000000 00000000 00000010 00001000 00100101 00000100 00000000 00000000 00000000 00000000 01011101]
```

进行异或运算得到最后校验码即可。

## 演示效果

![](./img/GIF.gif)

## 参与贡献

1. Fork 本仓库
2. 新建 Feat_xxx 分支
3. 提交代码
4. 新建 Pull Request

## 特技

1. 使用 Readme\_XXX.md 来支持不同的语言，例如 Readme\_en.md, Readme\_zh.md
2. Gitee 官方博客 [blog.gitee.com](https://blog.gitee.com)
3. 你可以 [https://gitee.com/explore](https://gitee.com/explore) 这个地址来了解 Gitee 上的优秀开源项目
4. [GVP](https://gitee.com/gvp) 全称是 Gitee 最有价值开源项目，是综合评定出的优秀开源项目
5. Gitee 官方提供的使用手册 [https://gitee.com/help](https://gitee.com/help)
6. Gitee 封面人物是一档用来展示 Gitee 会员风采的栏目 [https://gitee.com/gitee-stars/](https://gitee.com/gitee-stars/)
